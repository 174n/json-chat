<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>JSONChat</title><link rel=icon type=image/svg href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cdefs/%3E%3Cpath fill='%23333' d='M437 75A256 256 0 0027 370L1 486c-4 15 10 29 25 25l116-26A256 256 0 00437 75z'/%3E%3C/svg%3E"><script type=module>!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(r){const n=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise((r,s)=>{const i=new URL(e,n);if(self[t].moduleMap[i])return r(self[t].moduleMap[i]);const a=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(a),onerror(){s(new Error("Failed to import: "+e)),o(c)},onload(){r(self[t].moduleMap[i]),o(c)}});document.head.appendChild(c)}),self[t].moduleMap={}}}("/assets/");class e{static create(...e){return new this(...e)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class t extends e{constructor(e=[],t=4*e.length){super();let r=e;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(r instanceof Int8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)&&(r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),r instanceof Uint8Array){const e=r.byteLength,t=[];for(let n=0;n<e;n+=1)t[n>>>2]|=r[n]<<24-n%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random(e){const r=[],n=e=>{let t=e,r=987654321;const n=4294967295;return()=>{r=36969*(65535&r)+(r>>16)&n,t=18e3*(65535&t)+(t>>16)&n;let e=(r<<16)+t&n;return e/=4294967296,e+=.5,e*(Math.random()>.5?1:-1)}};for(let t,o=0;o<e;o+=4){const e=n(4294967296*(t||Math.random()));t=987654071*e(),r.push(4294967296*e()|0)}return new t(r,e)}toString(e=r){return e.stringify(this)}concat(e){const t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(let e=0;e<o;e+=1){const o=r[e>>>2]>>>24-e%4*8&255;t[n+e>>>2]|=o<<24-(n+e)%4*8}else for(let e=0;e<o;e+=4)t[n+e>>>2]=r[e>>>2];return this.sigBytes+=o,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const r={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse(e){const r=e.length,n=[];for(let t=0;t<r;t+=2)n[t>>>3]|=parseInt(e.substr(t,2),16)<<24-t%8*4;return new t(n,r/2)}},n={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse(e){const r=e.length,n=[];for(let t=0;t<r;t+=1)n[t>>>2]|=(255&e.charCodeAt(t))<<24-t%4*8;return new t(n,r)}},o={stringify(e){try{return decodeURIComponent(escape(n.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:e=>n.parse(unescape(encodeURIComponent(e)))};class s extends e{constructor(){super(),this._minBufferSize=0}reset(){this._data=new t,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=o.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let r;const{_data:n,blockSize:o}=this,s=n.words,i=n.sigBytes;let a=i/(4*o);a=e?Math.ceil(a):Math.max((0|a)-this._minBufferSize,0);const c=a*o,l=Math.min(4*c,i);if(c){for(let e=0;e<c;e+=o)this._doProcessBlock(s,e);r=s.splice(0,c),n.sigBytes-=l}return new t(r,l)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class i extends s{constructor(t){super(),this.blockSize=16,this.cfg=Object.assign(new e,t),this.reset()}static _createHelper(e){return(t,r)=>new e(r).finalize(t)}static _createHmacHelper(e){return(t,r)=>new a(e,r).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){return e&&this._append(e),this._doFinalize()}}class a extends e{constructor(e,t){super();const r=new e;this._hasher=r;let n=t;"string"==typeof n&&(n=o.parse(n));const s=r.blockSize,i=4*s;n.sigBytes>i&&(n=r.finalize(t)),n.clamp();const a=n.clone();this._oKey=a;const c=n.clone();this._iKey=c;const l=a.words,p=c.words;for(let e=0;e<s;e+=1)l[e]^=1549556828,p[e]^=909522486;a.sigBytes=i,c.sigBytes=i,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}}const c={stringify(e){const{words:t,sigBytes:r}=e,n=this._map;e.clamp();const o=[];for(let e=0;e<r;e+=3){const s=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<r;t+=1)o.push(n.charAt(s>>>6*(3-t)&63))}const s=n.charAt(64);if(s)for(;o.length%4;)o.push(s);return o.join("")},parse(e){let r=e.length;const n=this._map;let o=this._reverseMap;if(!o){this._reverseMap=[],o=this._reverseMap;for(let e=0;e<n.length;e+=1)o[n.charCodeAt(e)]=e}const s=n.charAt(64);if(s){const t=e.indexOf(s);-1!==t&&(r=t)}return((e,r,n)=>{const o=[];let s=0;for(let t=0;t<r;t+=1)if(t%4){const r=n[e.charCodeAt(t-1)]<<t%4*2|n[e.charCodeAt(t)]>>>6-t%4*2;o[s>>>2]|=r<<24-s%4*8,s+=1}return t.create(o,s)})(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},l=[];for(let e=0;e<64;e+=1)l[e]=4294967296*Math.abs(Math.sin(e+1))|0;const p=(e,t,r,n,o,s,i)=>{const a=e+(t&r|~t&n)+o+i;return(a<<s|a>>>32-s)+t},d=(e,t,r,n,o,s,i)=>{const a=e+(t&n|r&~n)+o+i;return(a<<s|a>>>32-s)+t},h=(e,t,r,n,o,s,i)=>{const a=e+(t^r^n)+o+i;return(a<<s|a>>>32-s)+t},u=(e,t,r,n,o,s,i)=>{const a=e+(r^(t|~n))+o+i;return(a<<s|a>>>32-s)+t};class f extends i{_doReset(){this._hash=new t([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(e,t){const r=e;for(let n=0;n<16;n+=1){const o=t+n,s=e[o];r[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}const n=this._hash.words,o=r[t+0],s=r[t+1],i=r[t+2],a=r[t+3],c=r[t+4],f=r[t+5],g=r[t+6],w=r[t+7],y=r[t+8],m=r[t+9],v=r[t+10],_=r[t+11],O=r[t+12],A=r[t+13],b=r[t+14],E=r[t+15];let S=n[0],k=n[1],L=n[2],T=n[3];S=p(S,k,L,T,o,7,l[0]),T=p(T,S,k,L,s,12,l[1]),L=p(L,T,S,k,i,17,l[2]),k=p(k,L,T,S,a,22,l[3]),S=p(S,k,L,T,c,7,l[4]),T=p(T,S,k,L,f,12,l[5]),L=p(L,T,S,k,g,17,l[6]),k=p(k,L,T,S,w,22,l[7]),S=p(S,k,L,T,y,7,l[8]),T=p(T,S,k,L,m,12,l[9]),L=p(L,T,S,k,v,17,l[10]),k=p(k,L,T,S,_,22,l[11]),S=p(S,k,L,T,O,7,l[12]),T=p(T,S,k,L,A,12,l[13]),L=p(L,T,S,k,b,17,l[14]),k=p(k,L,T,S,E,22,l[15]),S=d(S,k,L,T,s,5,l[16]),T=d(T,S,k,L,g,9,l[17]),L=d(L,T,S,k,_,14,l[18]),k=d(k,L,T,S,o,20,l[19]),S=d(S,k,L,T,f,5,l[20]),T=d(T,S,k,L,v,9,l[21]),L=d(L,T,S,k,E,14,l[22]),k=d(k,L,T,S,c,20,l[23]),S=d(S,k,L,T,m,5,l[24]),T=d(T,S,k,L,b,9,l[25]),L=d(L,T,S,k,a,14,l[26]),k=d(k,L,T,S,y,20,l[27]),S=d(S,k,L,T,A,5,l[28]),T=d(T,S,k,L,i,9,l[29]),L=d(L,T,S,k,w,14,l[30]),k=d(k,L,T,S,O,20,l[31]),S=h(S,k,L,T,f,4,l[32]),T=h(T,S,k,L,y,11,l[33]),L=h(L,T,S,k,_,16,l[34]),k=h(k,L,T,S,b,23,l[35]),S=h(S,k,L,T,s,4,l[36]),T=h(T,S,k,L,c,11,l[37]),L=h(L,T,S,k,w,16,l[38]),k=h(k,L,T,S,v,23,l[39]),S=h(S,k,L,T,A,4,l[40]),T=h(T,S,k,L,o,11,l[41]),L=h(L,T,S,k,a,16,l[42]),k=h(k,L,T,S,g,23,l[43]),S=h(S,k,L,T,m,4,l[44]),T=h(T,S,k,L,O,11,l[45]),L=h(L,T,S,k,E,16,l[46]),k=h(k,L,T,S,i,23,l[47]),S=u(S,k,L,T,o,6,l[48]),T=u(T,S,k,L,w,10,l[49]),L=u(L,T,S,k,b,15,l[50]),k=u(k,L,T,S,f,21,l[51]),S=u(S,k,L,T,O,6,l[52]),T=u(T,S,k,L,a,10,l[53]),L=u(L,T,S,k,v,15,l[54]),k=u(k,L,T,S,s,21,l[55]),S=u(S,k,L,T,y,6,l[56]),T=u(T,S,k,L,E,10,l[57]),L=u(L,T,S,k,g,15,l[58]),k=u(k,L,T,S,A,21,l[59]),S=u(S,k,L,T,c,6,l[60]),T=u(T,S,k,L,_,10,l[61]),L=u(L,T,S,k,i,15,l[62]),k=u(k,L,T,S,m,21,l[63]),n[0]=n[0]+S|0,n[1]=n[1]+k|0,n[2]=n[2]+L|0,n[3]=n[3]+T|0}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;const o=Math.floor(r/4294967296),s=r;t[15+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(t.length+1),this._process();const i=this._hash,a=i.words;for(let e=0;e<4;e+=1){const t=a[e];a[e]=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8)}return i}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}i._createHelper(f),i._createHmacHelper(f);class g extends e{constructor(t){super(),this.cfg=Object.assign(new e,{keySize:4,hasher:f,iterations:1},t)}compute(e,r){let n;const{cfg:o}=this,s=o.hasher.create(),i=t.create(),a=i.words,{keySize:c,iterations:l}=o;for(;a.length<c;){n&&s.update(n),n=s.update(e).finalize(r),s.reset();for(let e=1;e<l;e+=1)n=s.finalize(n),s.reset();i.concat(n)}return i.sigBytes=4*c,i}}const w=(e,t,r)=>g.create(r).compute(e,t);class y extends s{constructor(t,r,n){super(),this.cfg=Object.assign(new e,n),this._xformMode=t,this._key=r,this.reset()}static createEncryptor(e,t){return this.create(this._ENC_XFORM_MODE,e,t)}static createDecryptor(e,t){return this.create(this._DEC_XFORM_MODE,e,t)}static _createHelper(e){const t=e=>"string"==typeof e?D:S;return{encrypt:(r,n,o)=>t(n).encrypt(e,r,n,o),decrypt:(r,n,o)=>t(n).decrypt(e,r,n,o)}}reset(){super.reset.call(this),this._doReset()}process(e){return this._append(e),this._process()}finalize(e){return e&&this._append(e),this._doFinalize()}}y._ENC_XFORM_MODE=1,y._DEC_XFORM_MODE=2,y.keySize=4,y.ivSize=4;class m extends e{constructor(e,t){super(),this._cipher=e,this._iv=t}static createEncryptor(e,t){return this.Encryptor.create(e,t)}static createDecryptor(e,t){return this.Decryptor.create(e,t)}}function v(e,t,r){const n=e;let o;const s=this._iv;s?(o=s,this._iv=void 0):o=this._prevBlock;for(let e=0;e<r;e+=1)n[t+e]^=o[e]}class _ extends m{}_.Encryptor=class extends _{processBlock(e,t){const r=this._cipher,{blockSize:n}=r;v.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}},_.Decryptor=class extends _{processBlock(e,t){const r=this._cipher,{blockSize:n}=r,o=e.slice(t,t+n);r.decryptBlock(e,t),v.call(this,e,t,n),this._prevBlock=o}};const O={pad(e,r){const n=4*r,o=n-e.sigBytes%n,s=o<<24|o<<16|o<<8|o,i=[];for(let e=0;e<o;e+=4)i.push(s);const a=t.create(i,o);e.concat(a)},unpad(e){const t=e,r=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=r}};class A extends y{constructor(e,t,r){super(e,t,Object.assign({mode:_,padding:O},r)),this.blockSize=4}reset(){let e;super.reset.call(this);const{cfg:t}=this,{iv:r,mode:n}=t;this._xformMode===this.constructor._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e}_doProcessBlock(e,t){this._mode.processBlock(e,t)}_doFinalize(){let e;const{padding:t}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e}}class b extends e{constructor(e){super(),this.mixIn(e)}toString(e){return(e||this.formatter).stringify(this)}}const E={stringify(e){let r;const{ciphertext:n,salt:o}=e;return r=o?t.create([1398893684,1701076831]).concat(o).concat(n):n,r.toString(c)},parse(e){let r;const n=c.parse(e),o=n.words;return 1398893684===o[0]&&1701076831===o[1]&&(r=t.create(o.slice(2,4)),o.splice(0,4),n.sigBytes-=16),b.create({ciphertext:n,salt:r})}};class S extends e{static encrypt(t,r,n,o){const s=Object.assign(new e,this.cfg,o),i=t.createEncryptor(n,s),a=i.finalize(r),c=i.cfg;return b.create({ciphertext:a,key:n,iv:c.iv,algorithm:t,mode:c.mode,padding:c.padding,blockSize:i.blockSize,formatter:s.format})}static decrypt(t,r,n,o){let s=r;const i=Object.assign(new e,this.cfg,o);return s=this._parse(s,i.format),t.createDecryptor(n,i).finalize(s.ciphertext)}static _parse(e,t){return"string"==typeof e?t.parse(e,this):e}}S.cfg=Object.assign(new e,{format:E});const R={execute(e,r,n,o){let s=o;s||(s=t.random(8));const i=g.create({keySize:r+n}).compute(e,s),a=t.create(i.words.slice(r),4*n);return i.sigBytes=4*r,b.create({key:i,iv:a,salt:s})}};class D extends S{static encrypt(t,r,n,o){const s=Object.assign(new e,this.cfg,o),i=s.kdf.execute(n,t.keySize,t.ivSize);s.iv=i.iv;const a=S.encrypt.call(this,t,r,i.key,s);return a.mixIn(i),a}static decrypt(t,r,n,o){let s=r;const i=Object.assign(new e,this.cfg,o);s=this._parse(s,i.format);const a=i.kdf.execute(n,t.keySize,t.ivSize,s.salt);return i.iv=a.iv,S.decrypt.call(this,t,s,a.key,i)}}D.cfg=Object.assign(S.cfg,{kdf:R});const k=[],N=[],j=[],L=[],T=[],x=[],P=[],M=[],B=[],I=[],z=[];for(let e=0;e<256;e+=1)z[e]=e<128?e<<1:e<<1^283;let C=0,F=0;for(let e=0;e<256;e+=1){let e=F^F<<1^F<<2^F<<3^F<<4;e=e>>>8^255&e^99,k[C]=e,N[e]=C;const t=z[C],r=z[t],n=z[r];let o=257*z[e]^16843008*e;j[C]=o<<24|o>>>8,L[C]=o<<16|o>>>16,T[C]=o<<8|o>>>24,x[C]=o,o=16843009*n^65537*r^257*t^16843008*C,P[e]=o<<24|o>>>8,M[e]=o<<16|o>>>16,B[e]=o<<8|o>>>24,I[e]=o,C?(C=t^z[z[z[n^t]]],F^=z[z[F]]):(F=1,C=F)}const U=[0,1,2,4,8,16,32,64,128,27,54];class $ extends A{_doReset(){let e;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const t=this._keyPriorReset,r=t.words,n=t.sigBytes/4;this._nRounds=n+6;const o=4*(this._nRounds+1);this._keySchedule=[];const s=this._keySchedule;for(let t=0;t<o;t+=1)t<n?s[t]=r[t]:(e=s[t-1],t%n?n>6&&t%n==4&&(e=k[e>>>24]<<24|k[e>>>16&255]<<16|k[e>>>8&255]<<8|k[255&e]):(e=e<<8|e>>>24,e=k[e>>>24]<<24|k[e>>>16&255]<<16|k[e>>>8&255]<<8|k[255&e],e^=U[t/n|0]<<24),s[t]=s[t-n]^e);this._invKeySchedule=[];const i=this._invKeySchedule;for(let t=0;t<o;t+=1){const r=o-t;e=t%4?s[r]:s[r-4],i[t]=t<4||r<=4?e:P[k[e>>>24]]^M[k[e>>>16&255]]^B[k[e>>>8&255]]^I[k[255&e]]}}encryptBlock(e,t){this._doCryptBlock(e,t,this._keySchedule,j,L,T,x,k)}decryptBlock(e,t){const r=e;let n=r[t+1];r[t+1]=r[t+3],r[t+3]=n,this._doCryptBlock(r,t,this._invKeySchedule,P,M,B,I,N),n=r[t+1],r[t+1]=r[t+3],r[t+3]=n}_doCryptBlock(e,t,r,n,o,s,i,a){const c=e,l=this._nRounds;let p=c[t]^r[0],d=c[t+1]^r[1],h=c[t+2]^r[2],u=c[t+3]^r[3],f=4;for(let e=1;e<l;e+=1){const e=n[p>>>24]^o[d>>>16&255]^s[h>>>8&255]^i[255&u]^r[f];f+=1;const t=n[d>>>24]^o[h>>>16&255]^s[u>>>8&255]^i[255&p]^r[f];f+=1;const a=n[h>>>24]^o[u>>>16&255]^s[p>>>8&255]^i[255&d]^r[f];f+=1;const c=n[u>>>24]^o[p>>>16&255]^s[d>>>8&255]^i[255&h]^r[f];f+=1,p=e,d=t,h=a,u=c}const g=(a[p>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^r[f];f+=1;const w=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&p])^r[f];f+=1;const y=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[p>>>8&255]<<8|a[255&d])^r[f];f+=1;const m=(a[u>>>24]<<24|a[p>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^r[f];f+=1,c[t]=g,c[t+1]=w,c[t+2]=y,c[t+3]=m}}$.keySize=8;const H=A._createHelper($),{replace:q}="",J=/[&<>'"]/g,V={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},K=e=>V[e],X=String,Q=e=>{return null==e?e:(t=X(e),q.call(t,J,K));
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */var t};var Y,Z=(Y=function(e,t){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),W=Object.prototype.hasOwnProperty;function G(e,t){return W.call(e,t)}function ee(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);for(var n in t=[],e)G(e,n)&&t.push(n);return t}function te(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function re(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0}function ne(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function oe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function se(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,r=e.length;t<r;t++)if(se(e[t]))return!0}else if("object"==typeof e){var n=ee(e),o=n.length;for(t=0;t<o;t++)if(se(e[n[t]]))return!0}return!1}function ie(e,t){var r=[e];for(var n in t){var o="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==o&&r.push(n+": "+o)}return r.join("\n")}var ae=function(e){function t(t,r,n,o,s){var i=this.constructor,a=e.call(this,ie(t,{name:r,index:n,operation:o,tree:s}))||this;return a.name=r,a.index=n,a.operation=o,a.tree=s,Object.setPrototypeOf(a,i.prototype),a.message=ie(t,{name:r,index:n,operation:o,tree:s}),a}return Z(t,e),t}(Error),ce=ae,le=te,pe={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var n=he(r,this.path);n&&(n=te(n));var o=ue(r,{op:"remove",path:this.from}).removed;return ue(r,{op:"add",path:this.path,value:o}),{newDocument:r,removed:n}},copy:function(e,t,r){var n=he(r,this.from);return ue(r,{op:"add",path:this.path,value:te(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:ye(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},de={add:function(e,t,r){return re(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:pe.move,copy:pe.copy,test:pe.test,_get:pe._get};function he(e,t){if(""==t)return e;var r={op:"_get",path:t};return ue(e,r),r.value}function ue(e,t,r,n,o,s){if(void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===s&&(s=0),r&&("function"==typeof r?r(t,0,e,t.path):ge(t,0)),""===t.path){var i={newDocument:e};if("add"===t.op)return i.newDocument=t.value,i;if("replace"===t.op)return i.newDocument=t.value,i.removed=e,i;if("move"===t.op||"copy"===t.op)return i.newDocument=he(e,t.from),"move"===t.op&&(i.removed=e),i;if("test"===t.op){if(i.test=ye(e,t.value),!1===i.test)throw new ce("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i.newDocument=e,i}if("remove"===t.op)return i.removed=e,i.newDocument=null,i;if("_get"===t.op)return t.value=e,i;if(r)throw new ce("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return i}n||(e=te(e));var a=(t.path||"").split("/"),c=e,l=1,p=a.length,d=void 0,h=void 0,u=void 0;for(u="function"==typeof r?r:ge;;){if(h=a[l],o&&"__proto__"==h)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===d&&(void 0===c[h]?d=a.slice(0,l).join("/"):l==p-1&&(d=t.path),void 0!==d&&u(t,0,e,d)),l++,Array.isArray(c)){if("-"===h)h=c.length;else{if(r&&!re(h))throw new ce("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);re(h)&&(h=~~h)}if(l>=p){if(r&&"add"===t.op&&h>c.length)throw new ce("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);if(!1===(i=de[t.op].call(t,c,h,e)).test)throw new ce("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i}}else if(h&&-1!=h.indexOf("~")&&(h=oe(h)),l>=p){if(!1===(i=pe[t.op].call(t,c,h,e)).test)throw new ce("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return i}c=c[h]}}function fe(e,t,r,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=!0),r&&!Array.isArray(t))throw new ce("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=te(e));for(var s=new Array(t.length),i=0,a=t.length;i<a;i++)s[i]=ue(e,t[i],r,!0,o,i),e=s[i].newDocument;return s.newDocument=e,s}function ge(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new ce("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!pe[e.op])throw new ce("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if("string"!=typeof e.path)throw new ce("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new ce('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new ce("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new ce("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&se(e.value))throw new ce("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r)if("add"==e.op){var o=e.path.split("/").length,s=n.split("/").length;if(o!==s+1&&o!==s)throw new ce("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new ce("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var i=we([{op:"_get",path:e.from,value:void 0}],r);if(i&&"OPERATION_PATH_UNRESOLVABLE"===i.name)throw new ce("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}function we(e,t,r){try{if(!Array.isArray(e))throw new ce("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)fe(te(t),te(e),r||!0);else{r=r||ge;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(e){if(e instanceof ce)return e;throw e}}function ye(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,o,s=Array.isArray(e),i=Array.isArray(t);if(s&&i){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!ye(e[r],t[r]))return!1;return!0}if(s!=i)return!1;var a=Object.keys(e);if((n=a.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=n;0!=r--;)if(!ye(e[o=a[r]],t[o]))return!1;return!0}return e!=e&&t!=t}var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",JsonPatchError:ce,deepClone:le,getValueByPointer:he,applyOperation:ue,applyPatch:fe,applyReducer:function(e,t,r){var n=ue(e,t);if(!1===n.test)throw new ce("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument},validator:ge,validate:we,_areEquals:ye}),ve=new WeakMap,_e=function(e){this.observers=new Map,this.obj=e},Oe=function(e,t){this.callback=e,this.observer=t
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */};function Ae(e,t){var r,n=function(e){return ve.get(e)}(e);if(n){var o=function(e,t){return e.observers.get(t)}(n,t);r=o&&o.observer}else n=new _e(e),ve.set(e,n);if(r)return r;if(r={},n.value=te(e),t){r.callback=t,r.next=null;var s=function(){be(r)},i=function(){clearTimeout(r.next),r.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener("mouseup",i),window.addEventListener("keyup",i),window.addEventListener("mousedown",i),window.addEventListener("keydown",i),window.addEventListener("change",i))}return r.patches=[],r.object=e,r.unobserve=function(){be(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(n,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",i),window.removeEventListener("keyup",i),window.removeEventListener("mousedown",i),window.removeEventListener("keydown",i),window.removeEventListener("change",i))},n.observers.set(t,new Oe(t,r)),r}function be(e,t){void 0===t&&(t=!1);var r=ve.get(e.object);Ee(r.value,e.object,e.patches,"",t),e.patches.length&&fe(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function Ee(e,t,r,n,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var s=ee(t),i=ee(e),a=!1,c=i.length-1;c>=0;c--){var l=e[d=i[c]];if(!G(t,d)||void 0===t[d]&&void 0!==l&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&r.push({op:"test",path:n+"/"+ne(d),value:te(l)}),r.push({op:"remove",path:n+"/"+ne(d)}),a=!0):(o&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}));else{var p=t[d];"object"==typeof l&&null!=l&&"object"==typeof p&&null!=p?Ee(l,p,r,n+"/"+ne(d),o):l!==p&&(o&&r.push({op:"test",path:n+"/"+ne(d),value:te(l)}),r.push({op:"replace",path:n+"/"+ne(d),value:te(p)}))}}if(a||s.length!=i.length)for(c=0;c<s.length;c++){var d;G(e,d=s[c])||void 0===t[d]||r.push({op:"add",path:n+"/"+ne(d),value:te(t[d])})}}}var Se=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",unobserve:function(e,t){t.unobserve()},observe:Ae,generate:be,compare:function(e,t,r){void 0===r&&(r=!1);var n=[];return Ee(e,t,n,"",r),n}});Object.assign({},me,Se,{JsonPatchError:ae,deepClone:te,escapePathComponent:ne,unescapePathComponent:oe});const Re="d4145a 8e78ff ff7300 fbb03b ed1e79 019244 ed1c23 2e3192 fc7d7b fecc00 3aa17e 4f00bc 09c9be 662d8c 00a8c5 1353ae".split(" ");function De(e){const t=e.split("").map(e=>e.charCodeAt(0)).reduce((e,t)=>16777619*((e^t)>>>0),2166136261);return`<svg viewBox="-1.5 -1.5 8 8" xmlns="http://www.w3.org/2000/svg" fill="#${Re[t/16777619%Re.length]||""}">${e?[...Array(25).keys()].map(e=>t%(16-e%15)<4?`<rect x="${e>14?7-~~(e/5):~~(e/5)}" y="${e%5}" width="1" height="1"/>`:"").join(""):[]}</svg>`}document.body.setAttribute("style","");const ke=document.querySelector("#overlay"),Ne=document.querySelector("#chat-name"),je=document.querySelector("#chat-password"),Le=document.querySelector("#chat-server"),Te=document.querySelector("#msgs"),xe=document.querySelector("#msg-input"),Pe=document.querySelector("#password-form"),Me=document.querySelector("#msg-form"),Be=document.querySelector("#loading-bar"),Ie=document.querySelector("#typing");window.throwErrorAndReload=e=>{window.errorAccured||(window.errorAccured=!0,window.leaving||alert(e),location.reload())},window.onbeforeunload=()=>{window.leaving=!0},(async()=>{window.timeDiff=0;try{const e=Date.now(),t=1e3*(await(await fetch("https://use.ntpjs.org/v1/time.json")).json()).now;window.timeDiff=parseInt((Date.now()+e-2*t)/2)}catch(e){}})(),Le.value=Le.value.replace("%servername%","file:"===location.protocol||location.host.match(/^localhost:\d{2,4}$/g)?"http://localhost:3000":location.origin+"/json"),window.browserFingerprint=(e=>{let t,r,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)r=e.charCodeAt(t),n=(n<<5)-n+r,n|=0;return n.toString(32)})([navigator.userAgent,[screen.height,screen.width,screen.colorDepth].join("x"),(new Date).getTimezoneOffset(),!!window.sessionStorage,!!window.localStorage,Object.keys(navigator.plugins).map(e=>[navigator.plugins[e].name,navigator.plugins[e].description,Object.keys(navigator.plugins[e]).map(t=>[navigator.plugins[e][t].type,navigator.plugins[e][t].suffixes].join("~")).join(",")].join("::")).join(";")].join("###")).toString(),window.urlRegex="(https?:\\/\\/(www.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*))";const ze=(e=0)=>[...document.querySelectorAll("[data-date]")].slice(e).forEach(e=>e.innerText=(e=>{let t,r,n=0|(Date.now()-e)/1e3,o={"сек":60,"мин":60,"ч":24};for(t in o)if(r=n%o[t],!(n=0|n/o[t]))return r+" "+t+". назад";return new Date(e).toLocaleString("ru")})(parseInt(e.getAttribute("data-date"))));setInterval(()=>ze(-3),1e3),setInterval(ze,6e4),window.navestiSuetu=()=>setInterval(()=>{document.querySelector(".icon-bg").innerHTML=Array.from({length:(window.innerHeight+window.innerWidth)/10}).map(()=>De(Math.random().toString())).join("\n")},500);const Ce=async(e,t)=>{const{name:r,date:n,msg:s,fingerprint:i}=await(async e=>{const t=(await H.decrypt(e.data,window.chatPass)).toString(o);try{return JSON.parse(t)}catch(e){return console.error(e),{}}})(e);if(!(r&&n&&s&&i))return void throwErrorAndReload("Message parsing error");const a=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div");var p;a.classList.add("message"),l.classList.add("avatar"),c.classList.add("msg"),l.onclick=()=>{messages.splice(t,1),document.querySelector(`.message:nth-child(${t+1})`).remove(),notify()},l.innerHTML=""+De(i),i===browserFingerprint&&c.classList.add("mine"),e.notSent&&c.classList.add("not-sent"),r===chatName&&a.classList.add("same-name"),c.innerHTML=`\n    <div class="title-line">\n      <div class="name">${Q(r)}</div>\n      <div class="fingerprint">[${i.slice(0,10)}]</div>\n    </div>\n    <div class="text">${p=Q(s),p.replace(/(_[^*_]+)\*([^*_]+_)/g,"$1_*_$2").replace(/\*([^*]+)\*/g,"<b>$1</b>").replace(/_([^_]+)_/g,"<em>$1</em>").replace(new RegExp("(?<!\\]\\()"+urlRegex,"g"),'<a href="$1" target="_blank">$1</a>').replace(new RegExp(`!\\[([^\\]]{0,255})\\]\\(${urlRegex}\\)`,"g"),'<img src="$2" alt="$1">').replace(/\n/g,"<br />")}</div>\n    <div class="date" data-date="${n+timeDiff}"></div>\n  `,a.append(l),a.append(c),Te.append(a)};window.createChat=async e=>await(await fetch(`${Le.value.replace(/^(lp|l|p):(\s|)+/g,"").split("/").slice(0,-1).join("/")}/${w(e||je.value,Le.value.split("/").slice(-1).join("/")).toString()}`,{method:"PUT",headers:{"content-type":"application/json"},body:"[]"})),window.onresize=()=>{Ue()},xe.addEventListener("input",((e,t)=>{let r=0;return(...t)=>{let n=(new Date).getTime();if(!(n-r<5e3))return r=n,e(...t)}})(async()=>{if(chatLongpollSupported&&chatPatchSupported){const e=messages.filter(e=>e&&e.typing);if(e&&e[0]){const t=JSON.parse(await H.decrypt(e[0].typing,window.chatPass).toString(o)),r=[...(null==t?void 0:t.filter(e=>Date.now()-e.timestamp+timeDiff<3e4))||[],{chatName:chatName,timestamp:Date.now()-timeDiff,browserFingerprint:browserFingerprint}];e[0].typing=await H.encrypt(JSON.stringify(r),chatPass).toString()}else messages.push({typing:await H.encrypt(JSON.stringify([{chatName:chatName,timestamp:Date.now()-timeDiff,browserFingerprint:browserFingerprint}]),chatPass).toString()})}}));const Fe=async()=>{var e,t,r;let n=messages.filter(e=>e&&e.typing);if(!n[0]||!n[0].typing)return;const s=null==(r=null==(t=null==(e=JSON.parse(await H.decrypt(n[0].typing,window.chatPass).toString(o)))?void 0:e.filter(e=>Date.now()-e.timestamp+timeDiff<7e4&&e.chatName!==chatName&&e.browserFingerprint!==browserFingerprint))?void 0:t.map(e=>e.chatName))?void 0:r.filter((e,t,r)=>r.indexOf(e)===t);s&&s.length>0&&(Ie.innerText=`${s.join()} набира${s.length>1?"ют":"ет"} сообщение...`)};window.observeMessages=()=>{window.messagesObserver=Ae(window.messages,async e=>{await(async e=>{try{const t=await(await fetch(window.chatAddr+(chatPatchSupported?"?patch=true":""),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(chatPatchSupported?e:messages)})).json();t.error&&throwErrorAndReload(t.error)}catch(e){return throwErrorAndReload(e)}[...document.querySelectorAll(".not-sent")].forEach(e=>e.classList.remove("not-sent")),Ue(),$e()})(e)})},window.setLongpollMessages=e=>{messagesObserver.unobserve(),Te.classList.add("loading"),window.messages=e,(e||e.length>0)&&(Te.innerHTML="",e.filter(e=>e&&e.data).forEach(Ce),Ue(),$e()),Te.classList.remove("loading"),ze(),observeMessages()};const Ue=()=>{setTimeout(()=>{Te.scrollTop=Te.scrollHeight},300)},$e=()=>{Promise.all(Array.from(document.images).filter(e=>!e.complete).map(e=>new Promise(t=>{e.onload=e.onerror=t}))).then(()=>{Ue()})},He=async e=>{if(chatLongpollSupported&&chatPatchSupported&&!e&&setInterval(Fe,5e3),chatLongpollSupported&&!e)try{const e=await fetch(window.chatAddr+"?longpoll=true");200===e.status?setLongpollMessages(await e.json()):204!==e.status&&throwErrorAndReload("Error loading messages with longpoll"),He()}catch(e){throwErrorAndReload(e)}else Be.classList.toggle("toggle"),Be.classList.toggle("toggle"),Be.classList.toggle("full"),Te.classList.add("loading"),setTimeout(async()=>{Te.innerHTML="";try{window.messages=await(await fetch(window.chatAddr)).json()}catch(e){throwErrorAndReload(e)}messages&&messages instanceof Array||throwErrorAndReload("Messages not loaded"),messages.filter(e=>e&&e.data).forEach(Ce),Te.classList.remove("loading"),$e(),Ue(),e&&observeMessages(),ze()},300),chatLongpollSupported||setTimeout(He,15e3);chatLongpollSupported&&e&&(Be.remove(),He())};Pe.addEventListener("submit",e=>{e.preventDefault(),window.chatPass=je.value,window.chatName=Ne.value,window.chatLongpollSupported=!!Le.value.match(/^(p|)l(p|):/g),window.chatPatchSupported=!!Le.value.match(/^(l|)p(l|):/g),Le.value=Le.value.replace(/^(lp|l|p):(\s|)+/g,""),window.chatAddr=`${Le.value.split("/").slice(0,-1).join("/")}/${w(je.value,Le.value.split("/").slice(-1).join("/")).toString()}`,ke.classList.add("hidden"),je.value="",Ne.value="",He(!0)}),window.notify=()=>{window.messages.filter(e=>e&&e.webhook).forEach(async e=>{const t=await H.decrypt(e.webhook,window.chatPass).toString(o);t.match(new RegExp(urlRegex,"g"))&&await fetch(t)})},Me.addEventListener("submit",async e=>{if(e.preventDefault(),window.chatAddr){const e={data:await H.encrypt(JSON.stringify({name:chatName,fingerprint:browserFingerprint,date:Date.now()-timeDiff,msg:xe.value}),chatPass).toString()};messages.push(e),Ce({data:e.data,notSent:!0},messages.length-1),Ue(),$e(),xe.value="",notify()}})</script><style type=text/css>*{box-sizing:border-box;transition:all .3s ease-in-out}body,html{height:100%}body{background-color:#111;color:#fff;margin:0;padding:0;max-height:100%}body,button,input,textarea{font-family:Montserrat,sans-serif}a{color:#8da89e;text-decoration:none;position:relative;word-wrap:break-word}a:hover{text-decoration:underline}input{flex-grow:1;padding:10px 15px;border-radius:15px;outline:0;border:0;background-color:#333;margin-bottom:5px;color:#fff}input:focus{background-color:#394440}button{outline:0;border:0;background-color:#333;color:#fff;cursor:pointer;padding:10px 15px;margin-bottom:5px;border-radius:15px}.write button:focus,button:hover{background-color:#394440}.container{width:100%;max-width:720px;margin:0 auto;background-color:#222;padding-bottom:5px;height:100%;max-height:100%}.reload-status{position:fixed;bottom:0;width:100%;max-width:720px;left:50%;transform:translateX(-50%);height:5px;background-color:#333}.reload-status .bar{background-color:#394440;height:100%;width:0%;transition-duration:15s;transition-property:width;transition-timing-function:linear}.reload-status .bar.toggle{display:none}.reload-status .bar.full{width:100%}.chat{height:100%;display:flex;justify-content:space-between;flex-direction:column}.msgs{flex-direction:column;padding:10px;display:flex;align-items:flex-start;overflow-y:auto;scrollbar-width:thin}.msgs::-webkit-scrollbar{width:12px}.msgs::-webkit-scrollbar-track{background:#333}.msgs::-webkit-scrollbar-thumb{background-color:#394440;border-radius:20px;border:3px solid #333}.msgs.loading{filter:blur(5px)}.msgs .message{display:flex;align-items:center;max-width:80%}.msgs .avatar{height:45px;width:45px;background-color:#333;border-radius:50%;overflow:hidden;display:flex;align-items:flex-end;justify-content:center;position:relative}.msgs .avatar:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:all .3s ease-in-out;background-color:rgba(0,0,0,.8);background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 47.971 47.971' fill='%23fff'%3E%3Cdefs/%3E%3Cpath d='M28.228 23.986L47.092 5.122a2.998 2.998 0 000-4.242 2.998 2.998 0 00-4.242 0L23.986 19.744 5.121.88a2.998 2.998 0 00-4.242 0 2.998 2.998 0 000 4.242l18.865 18.864L.879 42.85a2.998 2.998 0 104.242 4.241l18.865-18.864L42.85 47.091c.586.586 1.354.879 2.121.879s1.535-.293 2.121-.879a2.998 2.998 0 000-4.242L28.228 23.986z'/%3E%3C/svg%3E");background-size:40%;background-position:center;background-repeat:no-repeat;cursor:pointer}.msgs .avatar:hover:after{opacity:1;backdrop-filter:blur(2px)}.msgs .avatar img{height:90%;width:90%}.msgs .message.same-name{align-self:flex-end}.msg{background-color:#333;padding:10px 15px;margin:10px;min-width:200px;max-width:100%;border-radius:15px;position:relative;padding-bottom:25px;overflow:hidden;max-width:calc(100% - 70px);position:relative;z-index:99}.msgs .avatar:hover+.msg{filter:blur(2px) brightness(.5)}.msg.mine{background-color:#394440}.msg.not-sent:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1084 322'%3E%3Cdefs/%3E%3Cdefs%3E%3Cpattern id='b' width='76.8' height='76.8' patternUnits='userSpaceOnUse'%3E%3Cg transform='scale(.3)'%3E%3Cdefs%3E%3Cg id='a' fill='%23fff'%3E%3Cpath d='M256-128h128l-512 512V256zM384 0v128L128 384H0z'/%3E%3C/g%3E%3C/defs%3E%3Cg%3E%3Cuse x='-256' xlink:href='%23a'/%3E%3Cuse xlink:href='%23a'/%3E%3CanimateTransform attributeName='transform' dur='0.5s' keyTimes='0;1' repeatCount='indefinite' type='translate' values='0 0; 256 0'/%3E%3C/g%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Cpath fill='url(%23b)' d='M0 0h1084v322H0z'/%3E%3C/svg%3E");background-size:cover;opacity:.1}.msg .title-line{display:flex;justify-content:space-between;font-size:.8em;margin-bottom:5px;color:#ccc}.msg .date,.msg .fingerprint{font-size:.7em}.msg .fingerprint{letter-spacing:.1em;opacity:.5}.msg .date{position:absolute;bottom:5px;color:#aaa;right:15px}.msg .text{line-height:1.3em;letter-spacing:.01em}.msg .text img{max-width:100%;max-height:300px;padding:5px 0}#typing{position:absolute;font-size:.8em;margin-top:-20px;color:#666;margin-left:5px}.write{padding:10px;display:flex}.write button{margin-left:10px;border-radius:100%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;padding:0}.write button svg{width:30px;height:30px}.overlay{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);backdrop-filter:blur(3px);display:flex;align-items:center;justify-content:center}.overlay:before,body:before{pointer-events:none;content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-size:10%;z-index:9;opacity:.1;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Cdefs/%3E%3Cfilter id='a' x='0' y='0'%3E%3CfeTurbulence baseFrequency='.8' stitchTiles='stitch' type='fractalNoise'/%3E%3C/filter%3E%3Crect width='300' height='300' fill='%23000'/%3E%3Crect width='300' height='300' filter='url(%23a)' /%3E%3C/svg%3E")}.overlay.hidden{opacity:0;visibility:hidden;z-index:-1}.password{display:flex;flex-direction:column}.password button{min-width:250px;max-width:100%}.fullwidth{width:100%}.icon-bg{position:absolute;width:100%;height:100%;top:0;left:0;z-index:-1;overflow:hidden;display:flex;justify-content:space-around;flex-wrap:wrap;opacity:.05}.icon-bg svg{width:100px;height:100px;transform:rotate(10deg);animation:rotation .5s}@keyframes rotation{from{transform:rotate(0)}to{transform:rotate(359deg)}}</style></head><body style=display:none><div class=icon-bg></div><div class=overlay id=overlay><form class=password autocomplete=off id=password-form><input type=text autocomplete=off required id=chat-server placeholder=Сервер value=lp:%servername%/x4z35solRfSNx8s/usdihNpc7z4PfXFYNHWUjZaTAW> <input type=text autocomplete=off required id=chat-name placeholder=Имя> <input type=password autocomplete=off required id=chat-password placeholder=Пароль> <button type=submit class=fullwidth>Войти</button></form></div><div class=container><div class=chat><div class=msgs id=msgs></div><form class=write autocomplete=off id=msg-form><div id=typing></div><input type=text required id=msg-input placeholder=Сообщение...> <button type=submit><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"><defs/><path fill=#ccc d="M7.8 6.1l-2.3-.8c-.6-.1-1.3-.2-1.9.3-.5.6-.4 1.3-.3 1.9l1 2.2.6 1.6H10a.8.8 0 010 1.4H4.9l-.7 1.6-.9 2.2c-.1.6-.2 1.3.3 1.9.6.5 1.3.4 1.9.3l2.3-.8L19.2 13l.6-.2c.1-.1.5-.4.5-.9s-.4-.8-.5-.9a5 5 0 00-.6-.2L7.8 6z"/></svg></button></form></div></div><div class=reload-status><div class="bar full" id=loading-bar></div></div></body></html>